

I'll start by loading the repository code search ability and exploring the repository structure to understand the codebase comprehensively.Now let me explore the source code directory structure more deeply.Let me try using the GitHub API directly to explore these subdirectories.Now let me read the key source files to understand their content and functionality in depth.Now I have a comprehensive understanding of the repository. Let me compile the detailed functional guide.

---

# ğŸ“š 6çš„Library â€” é¡¹ç›®åŠŸèƒ½å‘å¯¼ä¸æ¨¡å—åœ°å›¾

> **ä»“åº“åœ°å€**: [`alen123222/6-Library`](https://github.com/alen123222/6-Library)
> **é¡¹ç›®å®šä½**: çº¯æœ¬åœ° Android æ¼«ç”» / å°è¯´ / éŸ³é¢‘æ’­æ”¾å™¨
> **æŠ€æœ¯æ ˆ**: 100% Kotlin Â· Jetpack Compose Â· Material 3 Â· Media3 Â· Coil
> **æœ€ä½æ”¯æŒ**: Android 5.0 (API 21) Â· ç¼–è¯‘SDK 35

---

## ğŸ—‚ï¸ ä¸€ã€é¡¹ç›®æ•´ä½“æ¶æ„æ€»è§ˆ

```text
com.alendawang.manhua/
â”‚
â”œâ”€â”€ MainActivity.kt              â† åº”ç”¨å…¥å£ & æ ¸å¿ƒè·¯ç”±æ€»æ§ï¼ˆ114KB å·¨å‹æ–‡ä»¶ï¼‰
â”œâ”€â”€ AudioPlaybackService.kt      â† åå°éŸ³é¢‘æ’­æ”¾æœåŠ¡
â”œâ”€â”€ FloatingLyricsService.kt     â† æ‚¬æµ®æ­Œè¯çª—å£æœåŠ¡
â”‚
â”œâ”€â”€ model/                       â† ğŸ“¦ æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ Config.kt                â† é˜…è¯»å™¨/éŸ³é¢‘é…ç½®
â”‚   â”œâ”€â”€ Enums.kt                 â† å…¨å±€æšä¸¾å®šä¹‰
â”‚   â””â”€â”€ Models.kt                â† æ ¸å¿ƒæ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ navigation/                  â† ğŸ§­ å¯¼èˆªè·¯ç”±
â”‚   â””â”€â”€ Screen.kt                â† å±å¹•è·¯ç”±å®šä¹‰ & çŠ¶æ€ä¿å­˜
â”‚
â”œâ”€â”€ ui/                          â† ğŸ¨ UI å±‚
â”‚   â”œâ”€â”€ components/              â† å¯å¤ç”¨ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Cards.kt             â† å¡ç‰‡ç»„ä»¶ï¼ˆæ¼«ç”»/å°è¯´/éŸ³é¢‘åˆ—è¡¨å¡ç‰‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ CommonComponents.kt  â† é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Dialogs.kt           â† å¯¹è¯æ¡†é›†åˆ
â”‚   â”‚   â”œâ”€â”€ LyricView.kt         â† æ­Œè¯æ»šåŠ¨æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MeteorSlider.kt      â† æµæ˜Ÿè¿›åº¦æ¡
â”‚   â”‚   â””â”€â”€ VinylRecordView.kt   â† é»‘èƒ¶å”±ç‰‡åŠ¨ç”»ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ screens/                 â† é¡µé¢çº§ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomeScreen.kt        â† é¦–é¡µï¼ˆä¹¦æ¶/éŸ³é¢‘åº“ï¼‰
â”‚   â”‚   â”œâ”€â”€ DetailScreens.kt     â† è¯¦æƒ…é¡µï¼ˆæ¼«ç”»/å°è¯´/éŸ³é¢‘è¯¦æƒ…ï¼‰
â”‚   â”‚   â”œâ”€â”€ ReaderScreens.kt     â† æ¼«ç”»é˜…è¯»å™¨
â”‚   â”‚   â””â”€â”€ NovelReaderScreen.kt â† å°è¯´é˜…è¯»å™¨
â”‚   â”‚
â”‚   â””â”€â”€ theme/                   â† ä¸»é¢˜ç³»ç»Ÿ
â”‚       â”œâ”€â”€ AppColors.kt         â† åº”ç”¨é¢œè‰²å®šä¹‰
â”‚       â”œâ”€â”€ Color.kt             â† åŸºç¡€è‰²å€¼
â”‚       â”œâ”€â”€ Theme.kt             â† Material 3 ä¸»é¢˜é…ç½®
â”‚       â””â”€â”€ Type.kt              â† å­—ä½“æ’ç‰ˆå®šä¹‰
â”‚
â”œâ”€â”€ viewmodel/                   â† ğŸ§  ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ MainViewModel.kt         â† ä¸» ViewModelï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ä¸­æ¢ï¼‰
â”‚   â””â”€â”€ NovelReaderViewModel.kt  â† å°è¯´é˜…è¯»å™¨ä¸“ç”¨ ViewModel
â”‚
â””â”€â”€ utils/                       â† ğŸ”§ å·¥å…·ç±»
    â”œâ”€â”€ AudioMetadataUtils.kt    â† éŸ³é¢‘å…ƒæ•°æ®æå–
    â”œâ”€â”€ CacheUtils.kt            â† ç¼“å­˜ç®¡ç†
    â”œâ”€â”€ EpubUtils.kt             â† EPUB è§£æå·¥å…·
    â”œâ”€â”€ FileUtils.kt             â† æ–‡ä»¶æ“ä½œå·¥å…·
    â”œâ”€â”€ Helpers.kt               â† é€šç”¨è¾…åŠ©å‡½æ•°
    â”œâ”€â”€ ImageLoaderUtils.kt      â† å›¾ç‰‡åŠ è½½(å«å‹ç¼©åŒ…å›¾ç‰‡)
    â”œâ”€â”€ NovelUtils.kt            â† å°è¯´è§£æå·¥å…·
    â”œâ”€â”€ PreferencesManager.kt    â† SharedPreferences æŒä¹…åŒ–
    â”œâ”€â”€ ScannerUtils.kt          â† æ–‡ä»¶æ‰«æå¼•æ“
    â””â”€â”€ StringResources.kt       â† å¤šè¯­è¨€å­—ç¬¦ä¸²èµ„æº
```

---

## ğŸ§© äºŒã€å„æ¨¡å—è¯¦ç»†åŠŸèƒ½è¯´æ˜

---

### ğŸ“¦ æ¨¡å— 1ï¼šæ•°æ®æ¨¡å‹å±‚ (`model/`)

#### [`Config.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/model/Config.kt) â€” é…ç½®æ•°æ®ç±»

| ç±»/æšä¸¾ | ç”¨é€” |
|---------|------|
| `ReaderConfig` | å°è¯´é˜…è¯»å™¨é…ç½®ï¼ˆå­—å·ã€è¡Œé«˜ã€æ®µé—´è·ã€è¾¹è·ã€èƒŒæ™¯è‰²ã€å­—ä½“ã€è‡ªå®šä¹‰èƒŒæ™¯ç­‰ï¼‰ |
| `ReaderBackgroundColor` | é˜…è¯»å™¨èƒŒæ™¯é¢„è®¾ï¼šç¾Šçš®çº¸ã€å¤œé—´æ¨¡å¼ã€çº¯ç™½ã€ç°åº¦ã€å°‘å¥³ |
| `FontType` | å­—ä½“ç±»å‹ï¼šç³»ç»Ÿå­—ä½“ã€å®‹ä½“ã€é»‘ä½“ã€ç­‰å®½ |
| `PageContent` | åˆ†é¡µå†…å®¹æ•°æ®ï¼ˆèµ·å§‹/ç»“æŸç´¢å¼•ã€æ–‡æœ¬å†…å®¹ã€é¡µç ï¼‰ |
| `AudioPlayerConfig` | éŸ³é¢‘æ’­æ”¾å™¨é…ç½®ï¼ˆèƒŒæ™¯ã€æ­Œè¯å­—å·/é¢œè‰²ã€é®ç½©é€æ˜åº¦ã€æ’­æ”¾é€Ÿåº¦ã€æ‚¬æµ®æ­Œè¯å¼€å…³ï¼‰ |
| `FloatingLyricColor` | æ‚¬æµ®æ­Œè¯é¢„è®¾é¢œè‰²ï¼ˆå¤©è“ã€è§å…‰ç»¿ã€æ·¡é»„ã€æ·¡ç´«ã€é»‘è‰²ï¼‰ |
| `LyricsColor` | æ’­æ”¾é¡µé¢æ­Œè¯é¢œè‰²ï¼ˆç™½è‰² + 5ç§é¢„è®¾ï¼‰ |

#### [`Enums.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/model/Enums.kt) â€” å…¨å±€æšä¸¾

| æšä¸¾ | ç”¨é€” | æšä¸¾å€¼ |
|------|------|--------|
| `MediaType` | åª’ä½“ç±»å‹ | `COMIC` æ¼«ç”»ã€`NOVEL` å°è¯´ã€`AUDIO` éŸ³é¢‘ |
| `DisplayMode` | åˆ—è¡¨æ˜¾ç¤ºæ¨¡å¼ | åˆ—è¡¨(1åˆ—)ã€ä¸‰åˆ—ã€å››åˆ—ã€äº”åˆ— |
| `SortOption` | æ’åºæ–¹å¼ | æœ€è¿‘é˜…è¯»ã€æœ€æ—©é˜…è¯»ã€åç§° A-Zã€åç§° Z-A |
| `AudioDisplayMode` | éŸ³é¢‘åˆ—è¡¨æ¨¡å¼ | çº¯å•æ›²å¹³é“ºã€ä¸“è¾‘å¡ç‰‡æ¨¡å¼ |
| `AppTheme` | åº”ç”¨ä¸»é¢˜ | è½æ¨±(ç²‰)ã€æš—é»‘(èµ›åš)ã€æ°´å¢¨(ç°)ã€æŠ¹èŒ¶(ç»¿) |
| `AppLanguage` | åº”ç”¨è¯­è¨€ | ä¸­æ–‡ã€English |
| `ScanState` | æ‰«æè¿›åº¦çŠ¶æ€ | isScanning / currentFolder / totalFound |

#### [`Models.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/model/Models.kt) â€” æ ¸å¿ƒæ•°æ®æ¨¡å‹

| ç±»/æ¥å£ | ç”¨é€” | å…³é”®å­—æ®µ |
|---------|------|---------|
| `MediaHistory` (æ¥å£) | æ‰€æœ‰åª’ä½“çš„å…¬å…±æ¥å£ | id, name, uriString, coverUriString, timestamp, isFavorite, isNsfw |
| `ComicSourceType` | æ¼«ç”»æ¥æºç±»å‹ | FOLDER / ZIP / RAR / PDF |
| `ComicChapter` | æ¼«ç”»ç« èŠ‚ | name, uriString, sourceType, internalPath |
| `ComicHistory` | æ¼«ç”»å†å²è®°å½• | ç»§æ‰¿MediaHistory + chapters, lastReadIndex, lastReadChapterIndex, ç¼“å­˜è¿›åº¦ç­‰ |
| `NovelChapter` | å°è¯´ç« èŠ‚ | name, uriString, startIndex/endIndex, isEpubChapter, htmlContent |
| `NovelHistory` | å°è¯´å†å²è®°å½• | ç»§æ‰¿MediaHistory + chapters, lastReadChapterIndex, lastReadScrollPosition |
| `AudioTrack` | éŸ³é¢‘æ›²ç›® | name, uriString, duration, isFavorite |
| `AudioHistory` | éŸ³é¢‘å†å²è®°å½• | ç»§æ‰¿MediaHistory + tracks, lastPlayedIndex, lastPlayedPosition, customBackgroundUriString |

---

### ğŸ§­ æ¨¡å— 2ï¼šå¯¼èˆªè·¯ç”± (`navigation/`)

#### [`Screen.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/navigation/Screen.kt) â€” è·¯ç”±å®šä¹‰

é‡‡ç”¨ `sealed class` è‡ªå®šä¹‰è·¯ç”±ï¼ˆé Navigation Composeï¼‰ï¼Œé…åˆ `Saver` æ”¯æŒè¿›ç¨‹é‡å»ºåçš„çŠ¶æ€æ¢å¤ã€‚

| è·¯ç”± | å‚æ•° | è¯´æ˜ |
|------|------|------|
| `Screen.Home` | æ—  | é¦–é¡µ/ä¹¦æ¶ |
| `Screen.Details` | mediaType, mediaId, highlightTrackIndex? | åª’ä½“è¯¦æƒ…é¡µ |
| `Screen.ComicReader` | comicId, chapterIndex, initialScrollIndex | æ¼«ç”»é˜…è¯»å™¨ |
| `Screen.NovelReader` | novelId, chapterIndex, initialScrollPosition | å°è¯´é˜…è¯»å™¨ |
| `Screen.AudioPlayer` | audioId, trackIndex, initialPosition, showLyricsInitially | éŸ³é¢‘æ’­æ”¾å™¨ |

> âš ï¸ **ç»´æŠ¤æç¤º**: è·¯ç”±çŠ¶æ€ä¿å­˜/æ¢å¤é€»è¾‘åœ¨ `ScreenSaver` ä¸­ï¿½ï¿½åŠ¨åºåˆ—åŒ–ä¸º `List<Any>`ï¼Œæ–°å¢è·¯ç”±å‚æ•°æ—¶éœ€åŒæ­¥æ›´æ–° save/restore ä¸¤ç«¯ã€‚

---

### ğŸ§  æ¨¡å— 3ï¼šä¸šåŠ¡é€»è¾‘å±‚ (`viewmodel/`)

#### [`MainViewModel.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/viewmodel/MainViewModel.kt) â€” å…¨å±€çŠ¶æ€ç®¡ç†ä¸­æ¢ (15KB)

è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„**æ ¸å¿ƒæ§åˆ¶å™¨**ï¼Œç®¡ç†æ‰€æœ‰å…¨å±€çŠ¶æ€å’Œæ“ä½œã€‚åŠŸèƒ½åˆ†åŒºå¦‚ä¸‹ï¼š

| åŠŸèƒ½åŒº | åŒ…å«çš„çŠ¶æ€/æ–¹æ³• |
|--------|---------------|
| **å…¨å±€çŠ¶æ€** | `currentTheme`ã€`currentScreen`ã€`currentMediaType` |
| **æ¼«ç”»çŠ¶æ€** | `comicHistoryList`ã€`sortOption`ã€`displayMode` |
| **å°è¯´çŠ¶æ€** | `novelHistoryList` |
| **éŸ³é¢‘çŠ¶æ€** | `audioHistoryList`ã€`audioDisplayMode` |
| **æœç´¢** | `isSearchActive`ã€`searchQuery` |
| **éšè—æ¨¡å¼ (NSFW)** | `isHiddenModeUnlocked`ã€å¯†ç ç›¸å…³å¯¹è¯æ¡†çŠ¶æ€ |
| **è‡ªå®šä¹‰èƒŒæ™¯** | `customHomeBackgroundUri`ã€`customHomeBackgroundAlpha` |
| **æ‰«æ** | `scanState`ã€`startScan()`ã€`cancelScan()` |
| **å¯¹è¯æ¡†** | å„ç§ `show*Dialog` çŠ¶æ€å˜é‡ |
| **å¤šé€‰æ“ä½œ** | `isMultiSelectMode`ã€`selectedItems`ã€æ‰¹é‡åˆ é™¤/æ”¶è—/éšè— |
| **CRUD æ“ä½œ** | `updateComicHistory`ã€`deleteItem`ã€`updateCover`ã€`clearCurrentHistory` |
| **ä¸»é¢˜/æ’åº** | `setTheme()`ã€`nextTheme()`ã€`changeSortOption()`ã€`changeDisplayMode()` |

#### [`NovelReaderViewModel.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/viewmodel/NovelReaderViewModel.kt) â€” å°è¯´é˜…è¯»å™¨ä¸“ç”¨ ViewModel (9KB)

ç‹¬ç«‹ç®¡ç†å°è¯´é˜…è¯»å™¨çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ï¼š
- ç« èŠ‚åŠ è½½ä¸åˆ‡æ¢
- åˆ†é¡µè®¡ç®—
- é˜…è¯»è¿›åº¦ç®¡ç†
- é˜…è¯»å™¨é…ç½®ï¼ˆå­—ä½“ã€èƒŒæ™¯ç­‰ï¼‰

---

### ğŸ¨ æ¨¡å— 4ï¼šUI å±‚ (`ui/`)

#### 4.1 é¡µé¢çº§ç»„ä»¶ (`ui/screens/`)

| æ–‡ä»¶ | å¤§å° | åŠŸèƒ½ |
|------|------|------|
| [`HomeScreen.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/screens/HomeScreen.kt) | 62KB | **é¦–é¡µ/ä¹¦æ¶** â€” æœ€å¤§çš„é¡µé¢æ–‡ä»¶ï¼ŒåŒ…å«ï¼šTabåˆ‡æ¢(æ¼«ç”»/å°è¯´/éŸ³é¢‘)ã€ç½‘æ ¼/åˆ—è¡¨å±•ç¤ºã€æœç´¢æ ã€æ‰«æå…¥å£ã€å¤šé€‰æ¨¡å¼ã€è‡ªå®šä¹‰èƒŒæ™¯æ˜¾ç¤ºã€æ¨ªå±å¸ƒå±€é€‚é…ç­‰ |
| [`DetailScreens.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/screens/DetailScreens.kt) | 25KB | **è¯¦æƒ…é¡µ** â€” å±•ç¤ºæ¼«ç”»/å°è¯´/éŸ³é¢‘çš„è¯¦ç»†ä¿¡æ¯ã€ç« èŠ‚åˆ—è¡¨ã€å°é¢ç®¡ç†ã€æ”¶è—/éšè—æ“ä½œã€è¿›å…¥é˜…è¯»å™¨å…¥å£ |
| [`ReaderScreens.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/screens/ReaderScreens.kt) | 45KB | **æ¼«ç”»é˜…è¯»å™¨** â€” å›¾ç‰‡æµè§ˆï¼ˆæ”¯æŒç¼©æ”¾/ç¿»é¡µï¼‰ã€ç« èŠ‚åˆ‡æ¢ã€è¿›åº¦æ¡ã€æ‰‹åŠ¿æ“ä½œã€æ¨ªå±é€‚é… |
| [`NovelReaderScreen.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/screens/NovelReaderScreen.kt) | 49KB | **å°è¯´é˜…è¯»å™¨** â€” æ–‡æœ¬æ¸²æŸ“ã€å­—ä½“/æ’ç‰ˆ/èƒŒæ™¯è®¾ç½®é¢æ¿ã€ç« èŠ‚å¯¼èˆªã€é˜…è¯»è¿›åº¦ä¿å­˜ã€è‡ªå®šä¹‰èƒŒæ™¯+é®ç½© |

#### 4.2 å¯å¤ç”¨ UI ç»„ä»¶ (`ui/components/`)

| æ–‡ä»¶ | å¤§å° | åŠŸèƒ½ |
|------|------|------|
| [`Cards.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/components/Cards.kt) | 22KB | **å¡ç‰‡ç»„ä»¶** â€” æ¼«ç”»å¡ç‰‡ã€å°è¯´å¡ç‰‡ã€éŸ³é¢‘å¡ç‰‡ï¼ˆæ”¯æŒåˆ—è¡¨/ç½‘æ ¼æ¨¡å¼ï¼‰ï¼ŒåŒ…å«å°é¢å›¾ã€è¿›åº¦æ¡ã€æ”¶è—æ ‡è®°ç­‰ |
| [`CommonComponents.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/components/CommonComponents.kt) | 7KB | **é€šç”¨ç»„ä»¶** â€” é¡¶éƒ¨æ ã€åº•éƒ¨å¯¼èˆªã€åŠ è½½æŒ‡ç¤ºå™¨ç­‰å…±äº«UIå…ƒç´  |
| [`Dialogs.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/components/Dialogs.kt) | 36KB | **å¯¹è¯æ¡†é›†ï¿½ï¿½ï¿½** â€” åˆ é™¤ç¡®è®¤ã€å¯†ç è¾“å…¥ã€å¸®åŠ©è¯´æ˜ã€é•¿æŒ‰èœå•ã€èƒŒæ™¯è®¾ç½®ã€æ­Œè¯é¢œè‰²é€‰æ‹©ç­‰å…¨éƒ¨å¯¹è¯æ¡† |
| [`LyricView.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/components/LyricView.kt) | 9KB | **æ­Œè¯ç»„ä»¶** â€” åŒæ­¥æ»šåŠ¨æ­Œè¯æ˜¾ç¤ºï¼Œå½“å‰è¡Œé«˜äº®ï¼Œè‡ªåŠ¨è·Ÿéšæ’­æ”¾è¿›åº¦ |
| [`MeteorSlider.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/components/MeteorSlider.kt) | 11KB | **æµæ˜Ÿè¿›åº¦æ¡** â€” è‡ªå®šä¹‰Canvasç»˜åˆ¶ï¼Œæµæ˜Ÿå°¾è¿¹åŠ¨ç”»æ•ˆæœï¼Œç”¨äºéŸ³é¢‘æ’­æ”¾è¿›åº¦æ§åˆ¶ |
| [`VinylRecordView.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/components/VinylRecordView.kt) | 6KB | **é»‘èƒ¶å”±ç‰‡** â€” æ—‹è½¬åŠ¨ç”»çš„å”±ç‰‡ç»„ä»¶ï¼Œå±•ç¤ºå°é¢å›¾ç‰‡ï¼Œç”¨äºéŸ³é¢‘æ’­æ”¾å™¨é¡µé¢ |

#### 4.3 ä¸»é¢˜ç³»ç»Ÿ (`ui/theme/`)

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| [`AppColors.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/theme/AppColors.kt) | åº”ç”¨è‡ªå®šä¹‰é¢œè‰²é›†ï¼ˆä¸å››ç§ä¸»é¢˜å¯¹åº”çš„é…è‰²æ–¹æ¡ˆï¼‰ |
| [`Color.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/theme/Color.kt) | åŸºç¡€è‰²å€¼å¸¸é‡å®šä¹‰ |
| [`Theme.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/theme/Theme.kt) | Material 3 ä¸»é¢˜é…ç½®ï¼ˆæš—è‰²æ–¹æ¡ˆã€åŠ¨æ€ä¸»é¢˜é€‚é…ï¼‰ |
| [`Type.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/ui/theme/Type.kt) | Typography å­—ä½“æ’ç‰ˆç³»ç»Ÿ |

---

### ğŸ”§ æ¨¡å— 5ï¼šå·¥å…·ç±» (`utils/`)

| æ–‡ä»¶ | å¤§å° | åŠŸèƒ½è¯¦æƒ… |
|------|------|---------|
| [`ScannerUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/ScannerUtils.kt) | 18KB | **æ–‡ä»¶æ‰«æå¼•æ“** â€” æ‰«ææœ¬åœ°æ–‡ä»¶å¤¹ï¼Œè‡ªåŠ¨è¯†åˆ«æ¼«ç”»(å›¾ç‰‡æ–‡ä»¶å¤¹/ZIP/RAR)ã€å°è¯´(TXT/EPUB)ã€éŸ³é¢‘(MP3ç­‰)ï¼Œä½¿ç”¨ Flow å®ç°å¼‚æ­¥æ‰«æï¼Œæ”¯æŒå¢é‡æ‰«æ |
| [`PreferencesManager.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/PreferencesManager.kt) | 19KB | **æŒä¹…åŒ–ç®¡ç†** â€” ä½¿ç”¨ SharedPreferences + Gson åºåˆ—åŒ–å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼šæ¼«ç”»/å°è¯´/éŸ³é¢‘å†å²ã€ä¸»é¢˜ã€æ’åºæ–¹å¼ã€æ˜¾ç¤ºæ¨¡å¼ã€å¯†ç ã€èƒŒæ™¯è®¾ç½®ã€é˜…è¯»å™¨é…ç½®ã€è¯­è¨€åå¥½ç­‰ |
| [`ImageLoaderUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/ImageLoaderUtils.kt) | 27KB | **å›¾ç‰‡åŠ è½½æ ¸å¿ƒ** â€” è‡ªå®šä¹‰ Coil Fetcher/Keyerï¼Œæ”¯æŒä»æ–‡ä»¶å¤¹ã€ZIP/CBZã€RAR/CBR å‹ç¼©åŒ…ä¸­ç›´æ¥åŠ è½½å›¾ç‰‡ï¼Œæ— éœ€è§£å‹ |
| [`StringResources.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/StringResources.kt) | 14KB | **å¤šè¯­è¨€æ–‡æœ¬** â€” ä¸­è‹±åŒè¯­å­—ç¬¦ä¸²èµ„æºï¼Œé Android strings.xml æ–¹æ¡ˆï¼Œè€Œæ˜¯ä»£ç çº§å­—ç¬¦ä¸²æ˜ å°„ |
| [`EpubUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/EpubUtils.kt) | 13KB | **EPUB è§£æ** â€” è§£æ EPUB ç»“æ„ã€æå–ç« èŠ‚åˆ—è¡¨ã€è¯»å– HTML å†…å®¹è½¬çº¯æ–‡æœ¬ã€æå–å°é¢å›¾ |
| [`NovelUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/NovelUtils.kt) | 6KB | **å°è¯´è§£æ** â€” TXT æ–‡ä»¶ç« èŠ‚è‡ªåŠ¨è¯†åˆ«ï¼ˆåŸºäºæ­£åˆ™åŒ¹é…ç« èŠ‚æ ‡é¢˜ï¼‰ã€ç¼–ç è‡ªåŠ¨æ£€æµ‹ (JUniversalChardet) |
| [`Helpers.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/Helpers.kt) | 5KB | **é€šç”¨è¾…åŠ©** â€” æ’åºå‡½æ•°(applySort/applyNovelSort/applyAudioSort)ã€å†å²è®°å½•è¿‡æ»¤(filterHistory)ã€æ—¶é—´æ ¼å¼åŒ–ç­‰ |
| [`AudioMetadataUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/AudioMetadataUtils.kt) | 3KB | **éŸ³é¢‘å…ƒæ•°æ®** â€” æå–MP3ç­‰éŸ³é¢‘æ–‡ä»¶çš„æ ‡é¢˜ã€è‰ºæœ¯å®¶ã€ä¸“è¾‘ã€æ—¶é•¿ã€å†…åµŒå°é¢ |
| [`FileUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/FileUtils.kt) | 2KB | **æ–‡ä»¶å·¥å…·** â€” URI æ“ä½œã€æ–‡ä»¶åæå–ã€MIME ç±»å‹åˆ¤æ–­ |
| [`CacheUtils.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/utils/CacheUtils.kt) | 2KB | **ç¼“å­˜ç®¡ç†** â€” æ¼«ç”»å›¾ç‰‡ç¼“å­˜æ¸…ç†ï¼ˆæŒ‰ç« èŠ‚/å…¨éƒ¨æ¸…ç†ï¼‰ |

---

### âš™ï¸ æ¨¡å— 6ï¼šAndroid æœåŠ¡ (æ ¹åŒ…)

#### [`AudioPlaybackService.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/AudioPlaybackService.kt) â€” åå°éŸ³é¢‘æ’­æ”¾ (22KB)

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æ’­æ”¾æ ¸å¿ƒ | åŸºäº Media3 / ExoPlayer çš„å‰å°æœåŠ¡ |
| é€šçŸ¥æ§åˆ¶ | é€šçŸ¥æ æ˜¾ç¤ºæ’­æ”¾çŠ¶æ€ã€å°é¢ï¼Œæ”¯æŒæ’­æ”¾/æš‚åœ/ä¸Šä¸‹æ›² |
| æ’­æ”¾åˆ—è¡¨ç®¡ç† | æ›²ç›®åˆ—è¡¨åŠ è½½ã€é¡ºåº/éšæœºæ’­æ”¾ |
| æ­Œè¯è§£æ | LRC æ­Œè¯æ–‡ä»¶è§£æä¸åŒæ­¥ |
| è¿›åº¦å¹¿æ’­ | å‘ UI å±‚å’Œæ‚¬æµ®æ­Œè¯æœåŠ¡å¹¿æ’­å½“å‰æ’­æ”¾è¿›åº¦ |

#### [`FloatingLyricsService.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/FloatingLyricsService.kt) â€” æ‚¬æµ®æ­Œè¯çª—å£ (14KB)

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æ‚¬æµ®çª— | ä½¿ç”¨ WindowManager åˆ›å»ºå…¨å±€æ‚¬æµ®çª— |
| æ­Œè¯åŒæ­¥ | æ¥æ”¶ AudioPlaybackService çš„è¿›åº¦å¹¿æ’­ï¼Œå®æ—¶æ›´æ–°æ­Œè¯ |
| å¯æ‹–æ‹½ | æ”¯æŒæ‰‹åŠ¿æ‹–æ‹½ç§»åŠ¨ä½ç½® |
| è‡ªå®šä¹‰æ ·å¼ | å¯é…ç½®å­—å·ã€é¢œè‰²ï¼ˆå¯¹åº” `FloatingLyricColor` é¢„è®¾ï¼‰ |

#### [`MainActivity.kt`](https://github.com/alen123222/6-Library/blob/main/app/src/main/java/com/alendawang/manhua/MainActivity.kt) â€” åº”ç”¨å…¥å£ (114KB âš ï¸)

è¿™æ˜¯æ•´ä¸ªåº”ç”¨æœ€å¤§çš„æ–‡ä»¶ï¼Œæ‰¿æ‹…äº†**è·¯ç”±åˆ†å‘ã€æƒé™ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸå¤„ç†ã€éŸ³é¢‘æ§åˆ¶ç»‘å®š**ç­‰èŒè´£ã€‚

| åŠŸèƒ½åŒºå— | è¯´æ˜ |
|----------|------|
| è·¯ç”±åˆ†å‘ | æ ¹æ® `currentScreen` æ¸²æŸ“å¯¹åº”é¡µé¢ Composable |
| æƒé™å¤„ç† | å­˜å‚¨æƒé™(SAF)ã€æ‚¬æµ®çª—æƒé™ã€ç”Ÿç‰©è¯†åˆ«è®¤è¯ |
| æœåŠ¡ç»‘å®š | ç»‘å®š `AudioPlaybackService`ï¼Œç®¡ç†æ’­æ”¾çŠ¶æ€å›è°ƒ |
| ActivityResult | æ–‡ä»¶å¤¹é€‰æ‹©(æ‰«æç”¨)ã€å›¾ç‰‡é€‰æ‹©(å°é¢/èƒŒæ™¯ç”¨) |
| ç³»ç»Ÿæ æ§åˆ¶ | æ²‰æµ¸å¼ä½“éªŒï¼Œé˜…è¯»å™¨ä¸­éšè—ç³»ç»Ÿæ  |

> âš ï¸ **ç»´æŠ¤æç¤º**: `MainActivity.kt` ä½“é‡è¿‡å¤§(114KB)ï¼Œæœªæ¥å¯è€ƒè™‘å°†è·¯ç”±åˆ†å‘ã€æƒé™ç®¡ç†ã€éŸ³é¢‘ç»‘å®šç­‰é€»è¾‘æŠ½å‡ºä¸ºç‹¬ç«‹çš„ Composable æˆ– Helperã€‚

---

## ğŸ”„ ä¸‰ã€å…³é”®æ•°æ®æµ

```text
ç”¨æˆ·æ“ä½œ
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     çŠ¶æ€å˜æ›´      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI å±‚        â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  MainViewModel     â”‚
â”‚  (Screens)    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  (çŠ¶æ€ç®¡ç†ä¸­æ¢)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è°ƒç”¨æ–¹æ³•      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                    è¯»å†™æ•°æ® â”‚
                                          â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚  Utils å±‚          â”‚
                                  â”‚  PreferencesManagerâ”‚ â† SharedPreferences
                                  â”‚  ScannerUtils      â”‚ â† æ–‡ä»¶ç³»ç»Ÿæ‰«æ
                                  â”‚  ImageLoaderUtils   â”‚ â† å›¾ç‰‡åŠ è½½
                                  â”‚  EpubUtils/NovelUtilsâ”‚ â† æ–‡æœ¬è§£æ
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ·ï¸ å››ã€å…³é”®æŠ€æœ¯ç‚¹é€ŸæŸ¥

| æŠ€æœ¯ç‚¹ | å®ç°ä½ç½® | è¯´æ˜ |
|--------|---------|------|
| å‹ç¼©åŒ…ç›´è¯»(ZIP/RAR) | `ImageLoaderUtils.kt` + `ScannerUtils.kt` | ä½¿ç”¨ Junrar å’Œ java.util.zip å®ç°ï¼Œæ— éœ€è§£å‹åˆ°ç£ç›˜ |
| ç¼–ç æ£€æµ‹ | `NovelUtils.kt` | JUniversalChardet è‡ªåŠ¨è¯†åˆ« TXT ç¼–ç  |
| LRC æ­Œè¯è§£æ | `AudioPlaybackService.kt` | æ­£åˆ™è§£æ `[mm:ss.xx]` æ—¶é—´æˆ³ |
| è¿›ç¨‹æ¢å¤ | `Screen.kt` (ScreenSaver) | Compose `rememberSaveable` + è‡ªå®šä¹‰ Saver |
| NSFW éšè—æ¨¡å¼ | `MainViewModel.kt` + `PreferencesManager.kt` | å¯†ç ä¿æŠ¤ï¼Œç”Ÿç‰©è¯†åˆ«(Biometric)å¯é€‰ |
| æŒä¹…åŒ–æ–¹æ¡ˆ | `PreferencesManager.kt` | å…¨éƒ¨ä½¿ç”¨ SharedPreferences + Gson JSON åºåˆ—åŒ– |
| å¤šè¯­è¨€ | `StringResources.kt` + `Enums.kt` (AppLanguage) | ä»£ç çº§å®ç°ï¼Œä¸­/è‹±åŒè¯­ |
| å››ç§ä¸»é¢˜ | `Enums.kt` (AppTheme) + `ui/theme/` | è½æ¨±/æš—é»‘/æ°´å¢¨/æŠ¹èŒ¶ï¼Œæ”¯æŒä¸€é”®åˆ‡æ¢å¾ªç¯ |

---

## ğŸ“ äº”ã€ç»´æŠ¤å»ºè®®

1. **`MainActivity.kt` äºŸéœ€æ‹†åˆ†** â€” 114KB çš„è¶…å¤§æ–‡ä»¶æ˜¯æœ€å¤§çš„ç»´æŠ¤éšæ‚£ï¼Œå»ºè®®å°†è·¯ç”±é€»è¾‘ã€æƒé™å¤„ç†ã€æœåŠ¡ç»‘å®šåˆ†åˆ«æŠ½å‡º
2. **`HomeScreen.kt` (62KB)** â€” åŒæ ·è¿‡å¤§ï¼Œå¯è€ƒè™‘æŒ‰ Tab å†…å®¹ï¼ˆæ¼«ç”»Tabã€å°è¯´Tabã€éŸ³é¢‘Tabï¼‰æ‹†åˆ†ä¸ºç‹¬ç«‹ Composable
3. **æŒä¹…åŒ–å‡çº§** â€” å½“å‰ä½¿ç”¨ SharedPreferences å­˜å‚¨å…¨éƒ¨æ•°æ®ï¼ˆåŒ…æ‹¬å®Œæ•´åˆ—è¡¨JSONï¼‰ï¼Œæ•°æ®é‡å¢å¤§åæ€§èƒ½ä¼šä¸‹é™ï¼Œå¯è€ƒè™‘è¿ç§»è‡³ Room æ•°æ®åº“
4. **`viewmodel/mr.jpg`** â€” ä»£ç ç›®å½•ä¸­å­˜åœ¨ä¸€å¼ å›¾ç‰‡æ–‡ä»¶ï¼Œåº”ç§»è‡³ `res/` èµ„æºç›®å½•
5. **ç­¾åä¿¡æ¯** â€” `app/build.gradle.kts` ä¸­ç¡¬ç¼–ç äº†ç­¾åå¯†ç ï¼Œæœ‰å®‰å…¨é£é™©